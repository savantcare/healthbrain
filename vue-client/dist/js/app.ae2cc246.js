(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],d=0,l=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);f&&f(e);while(l.length)l.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},i={app:0},a={app:0},o=[];function s(t){return c.p+"js/"+({MultiChangeSocialHistory:"MultiChangeSocialHistory",home:"home",login:"login"}[t]||t)+"."+{MultiChangeSocialHistory:"e489a07f","chunk-2624df20":"62bdc3ac","chunk-2d0a4677":"f69b43ff","chunk-2d221a25":"5dd9afc6","chunk-2d228c68":"730e639f","chunk-5a75f314":"28e7a160","chunk-967f49e6":"cbf25630","chunk-2d20edb2":"2a679281","chunk-2d230e36":"1af79eb9","chunk-efe2f83a":"b56e241a",home:"e10d8ecc",login:"15f62863","chunk-2d0b8a75":"c03e337d","chunk-2d0c4df8":"68ec14a2","chunk-2d0d5fc1":"25740838","chunk-377b5272":"15113e1b","chunk-398008a3":"fc19ce73","chunk-4f6e6841":"713a690f","chunk-4fd54709":"fecf1393","chunk-2cda9022":"d621daaf","chunk-6c2d573c":"a67c1771"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={MultiChangeSocialHistory:1,"chunk-967f49e6":1,home:1,"chunk-377b5272":1,"chunk-398008a3":1,"chunk-4f6e6841":1,"chunk-4fd54709":1,"chunk-2cda9022":1,"chunk-6c2d573c":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var r="css/"+({MultiChangeSocialHistory:"MultiChangeSocialHistory",home:"home",login:"login"}[t]||t)+"."+{MultiChangeSocialHistory:"f4020fab","chunk-2624df20":"31d6cfe0","chunk-2d0a4677":"31d6cfe0","chunk-2d221a25":"31d6cfe0","chunk-2d228c68":"31d6cfe0","chunk-5a75f314":"31d6cfe0","chunk-967f49e6":"349d4166","chunk-2d20edb2":"31d6cfe0","chunk-2d230e36":"31d6cfe0","chunk-efe2f83a":"31d6cfe0",home:"290365ef",login:"31d6cfe0","chunk-2d0b8a75":"31d6cfe0","chunk-2d0c4df8":"31d6cfe0","chunk-2d0d5fc1":"31d6cfe0","chunk-377b5272":"572cc498","chunk-398008a3":"b7779790","chunk-4f6e6841":"00e2ab75","chunk-4fd54709":"51ffbd93","chunk-2cda9022":"1db3543f","chunk-6c2d573c":"b7779790"}[t]+".css",a=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===a))return e()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===r||d===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[t],f.parentNode.removeChild(f),n(o)},f.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){i[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(t);var l=new Error;u=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}a[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var f=d;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"459b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.modalTitle)+" "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.closeTab}},[t._v("x")])]},proxy:!0}])},[n("label",[t._v("Description:")]),n("b-form-textarea",{attrs:{id:"textarea-state",state:t.validation,rows:"5",autofocus:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),n("b-form-invalid-feedback",{attrs:{state:t.validation}},[t._v("Description content is required.")]),n("b-button",{staticClass:"float-right mb-2 mt-2",attrs:{variant:"primary",size:"sm",disabled:!t.validation},on:{click:t.save}},[t._v(t._s(t.buttonText))])],1)},i=[],a=(n("a4d3"),n("e01a"),n("4de4"),n("b441")),o=n("cc98"),s=n.n(o),c={data:function(){return{description:""}},computed:{type:function(){return this.$store.state.tabDialog.reminderTabType},modalTitle:function(){return this.type==a["ADD_REMINDER"]?"Add Reminder":"Edit Reminder"},buttonText:function(){return this.type==a["ADD_REMINDER"]?"Save":"Update"},validation:function(){return this.description.length>0},id:function(){return this.$route.query.patient_id},updateData:function(){return this.$store.state.tabDialog.reminderData},tabList:function(){return this.$store.state.tabDialog.tabList},userId:function(){return this.$store.state.userId}},methods:{save:function(){if(this.type==a["ADD_REMINDER"]){var t=new Date,e={createdAt:t.toDateString(),reminderID:s()(),patientId:this.id,description:this.description,createdByUserId:this.userId};this.$store.dispatch("addReminder",{data:e,toast:this.$bvToast}),this.$store.dispatch("updateRightPanelRow"),this.description=""}else this.updateData["description"]=this.description,this.updateData["discontinuedByUserId"]=this.userId,this.updateData["createdByUserId"]=this.userId,this.$store.dispatch("updateReminder",{data:this.updateData,toast:this.$bvToast})},closeTab:function(){var t=this.tabList.filter((function(t){return t.key!=a["ADD_REMINDER"]}));this.$store.commit("setTabList",t)}},mounted:function(){this.type==a["EDIT_REMINDER"]&&(this.description=this.updateData.description)}},u=c,d=n("2877"),l=Object(d["a"])(u,r,i,!1,null,"151206e7",null);e["default"]=l.exports},"50fb":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Multi change recommendation "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.closeTab}},[t._v("x")])]},proxy:!0}])},[n("TabPagination"),n("b-row",{attrs:{cols:"3","align-h":"around"}},t._l(t.recommendations,(function(e,r){return n("b-col",{key:"item-"+r},[n("label",[t._v("Description:")]),n("b-form-textarea",{attrs:{id:"textarea-state",rows:"5",autofocus:""},model:{value:e.description,callback:function(n){t.$set(e,"description",n)},expression:"item.description"}}),n("b-form-invalid-feedback",[t._v("Description content is required.")]),n("b-button",{staticClass:"float-right mb-2 mt-2",attrs:{variant:"primary",size:"sm"},on:{click:function(n){return t.update(e)}}},[t._v("Save")]),n("br"),n("history-component",{attrs:{id:e.recommendationID}})],1)})),1)],1)},i=[],a=(n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("fb6a"),n("d3b7"),n("159b"),n("b441")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{staticStyle:{cursor:"pointer"},on:{click:t.gotoPrevPage}},[t.currentPage>1?n("div",[n("b-icon-arrow-left"),n("span",[t._v("Prev")])],1):t._e()]),n("div",{staticStyle:{cursor:"pointer"},on:{click:t.gotoNextPage}},[t.currentPage<t.pageCount?n("div",[n("span",[t._v("Next")]),n("b-icon-arrow-right")],1):t._e()])])},s=[],c={props:["title"],computed:{currentPage:function(){return this.$parent.currentPage},pageCount:function(){return this.$parent.pageCount}},methods:{gotoPrevPage:function(){this.$parent.gotoPrevPage()},gotoNextPage:function(){this.$parent.gotoNextPage()}}},u=c,d=n("2877"),l=Object(d["a"])(u,o,s,!1,null,"fa428ab6",null),f=l.exports,m=function(){return n.e("chunk-2d228c68").then(n.bind(null,"db2f"))},h={computed:{items:function(){var t=this;return this.$store.state.recommendation.list.filter((function(e){return e.patientId==t.id&&1!=e.discontinue}))},id:function(){return this.$route.query.patient_id},tabList:function(){return this.$store.state.tabDialog.tabList},pageCount:function(){return Math.ceil(this.items.length/3)},recommendations:function(){var t=[];this.items.forEach((function(e){t.push({id:e["id"],description:e["description"],createdAt:e["createdAt"],patientId:e["patientId"],recommendationID:e["recommendationID"]})}));var e=3*(this.currentPage-1),n=3*this.currentPage,r=t.length;if(r<n){var i=n-r;e-=i,n=r}return t.slice(e,n)},userId:function(){return this.$store.state.userId}},data:function(){return{currentPage:1}},mounted:function(){},methods:{update:function(t){t["discontinuedByUserId"]=this.userId,t["createdByUserId"]=this.userId,this.$store.dispatch("updateRecommendation",{data:t,toast:this.$bvToast})},closeTab:function(){var t=this.tabList.filter((function(t){return t.key!=a["MULTIPLE_CHANGE_RECOMMENDATION"]}));this.$store.commit("setTabList",t)},gotoPrevPage:function(){this.currentPage-=1},gotoNextPage:function(){this.currentPage+=1}},components:{HistoryComponent:m,TabPagination:f}},p=h,b=Object(d["a"])(p,r,i,!1,null,"f4c1e9da",null);e["default"]=b.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("0cdd");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("Offline",{on:{"detected-condition":t.handleConnectivityChange}})],1)},a=[],o=(n("d3b7"),function(){return n.e("chunk-2d0a4677").then(n.bind(null,"05fb"))}),s={components:{Offline:o},methods:{handleConnectivityChange:function(t){this.$store.commit("setConnectionStatus",t)}}},c=s,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null),l=d.exports,f=(n("99af"),n("b0c0"),n("ac1f"),n("1276"),n("96cf"),n("1da1")),m=n("2f62"),h=n("0e44"),p=(n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("caad"),n("2532"),n("159b"),n("b441")),b=localStorage.getItem("token"),v={state:{list:[],currentDate:new Date},mutations:{setRecommendationList:function(t,e){t.list=e},addNewRecommendation:function(t,e){t.list.push(e)},removeNewRecommendation:function(t){t.list.pop()},setRecommendationCurrentDate:function(t,e){t.currentDate=e},SOCKET_ON_UPDATE_RECOMMENDATIONS:function(t,e){t.list=e},SOCKET_ADD_RECOMMENDATION:function(t,e){if(t.list.length>0){var n=t.list[t.list.length-1];if(n.recommendationID==e.recommendationID)return}t.list.push(e)},SOCKET_UPDATE_RECOMMENDATION:function(t,e){var n=[];t.list.forEach((function(t){t.id!=e.id?n.push(t):n.push(e)})),t.list=n},SOCKET_DISCONTINUE_RECOMMENDATION:function(t,e){console.log("SOCKET_DISCONTINUE_RECOMMENDATION");var n=t.list.filter((function(t){return t.id!=e}));t.list=n}},actions:{addRecommendation:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.data,a=e.toast,r("addNewRecommendation",i),n.prev=3,n.next=6,fetch(p["RECOMMENDATION_API_URL"],{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+b},body:JSON.stringify(i)});case 6:o=n.sent,o.ok||(a.toast("Failed to add recommendation data",{title:"Error",variant:"danger",solid:!0}),r("removeNewRecommendation")),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](3),a.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),r("removeNewRecommendation");case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))()},updateRecommendation:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.state,i=t.commit,a=e.data,o=e.toast,s=r.list,c=[],s.forEach((function(t){t.id==a.id?c.push({id:a.id,description:a.description,createdAt:a.createdAt,patientId:a.patientId}):c.push(t)})),i("setRecommendationList",c),n.prev=6,n.next=9,fetch("".concat(p["RECOMMENDATION_API_URL"],"/").concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+b},body:JSON.stringify(a)});case 9:u=n.sent,u.ok||(o.toast("Failed to update recommendation data",{title:"Error",variant:"danger",solid:!0}),i("setRecommendationList",s)),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](6),o.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),i("setRecommendationList",s);case 17:case"end":return n.stop()}}),n,null,[[6,13]])})))()},discontinueRecommendation:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.state,i=t.commit,a=e.data,o=e.toast,s=r.list,c=s.filter((function(t){return t.id!=a.id})),i("setRecommendationList",c),n.prev=5,a["discontinue"]=!0,n.next=9,fetch("".concat(p["RECOMMENDATION_API_URL"],"/").concat(a.id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+b},body:JSON.stringify(a)});case 9:u=n.sent,u.ok||(o.toast("Failed to discontinue recommendation data",{title:"Error",variant:"danger",solid:!0}),i("setRecommendationList",s)),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](5),o.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),i("setRecommendationList",s);case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},multidiscontinueRecommendation:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.state,i=t.commit,a=e.selectedIds,o=e.toast,s=e.selectedDatas,c=r.list,u=c.filter((function(t){return!a.includes(t.id)})),i("setRecommendationList",u),s.forEach(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e["discontinue"]=!0,t.next=4,fetch("".concat(p["RECOMMENDATION_API_URL"],"/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+b},body:JSON.stringify(e)});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),o.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),i("setRecommendationList",c);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return n.stop()}}),n)})))()},getRecommendations:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.patientId,a=e.toast,null==b&&(b=localStorage.getItem("token")),n.prev=3,n.next=6,fetch("".concat(p["RECOMMENDATION_API_URL"],"?patientId=").concat(i),{headers:{Authorization:"Bearer "+b}});case 6:if(o=n.sent,!o.ok){n.next=14;break}return n.next=10,o.json();case 10:s=n.sent,r("setRecommendationList",s),n.next=15;break;case 14:"401"==o.status?(a.toast("Token is expired",{title:"Error",variant:"danger",solid:!0}),localStorage.removeItem("token"),window.location="/"):a.toast("Failed to get recommendation data",{title:"Error",variant:"danger",solid:!0});case 15:n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](3),a.toast("Server connection error",{title:"Error",variant:"danger",solid:!0});case 20:case"end":return n.stop()}}),n,null,[[3,17]])})))()}},getters:{recommendations:function(t){return t.list.filter((function(t){return 1!=t.discontinue}))},panelRecommendations:function(t){return t.list.filter((function(e){var n=new Date(e.createdAt);return 1!=e.discontinue&&n<=t.currentDate}))}}},g=localStorage.getItem("token"),R={state:{list:[],currentDate:new Date},mutations:{setReminderList:function(t,e){t.list=e},addNewReminder:function(t,e){t.list.push(e)},removeNewReminder:function(t){t.list.pop()},setReminderCurrentDate:function(t,e){t.currentDate=e},SOCKET_ON_UPDATE_REMINDERS:function(t,e){t.list=e},SOCKET_ADD_REMINDER:function(t,e){if(t.list.length>0){var n=t.list[t.list.length-1];if(n.reminderID==e.reminderID)return}t.list.push(e)},SOCKET_UPDATE_REMINDER:function(t,e){var n=[];t.list.forEach((function(t){t.id!=e.id?n.push(t):n.push(e)})),t.list=n},SOCKET_DISCONTINUE_REMINDER:function(t,e){console.log("SOCKET_DISCONTINUE_REMINDER");var n=t.list.filter((function(t){return t.id!=e}));t.list=n}},actions:{addReminder:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.data,a=e.toast,r("addNewReminder",i),n.prev=3,n.next=6,fetch(p["REMINDER_API_URL"],{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+g},body:JSON.stringify(i)});case 6:o=n.sent,o.ok||(a.toast("Failed to add reminder data",{title:"Error",variant:"danger",solid:!0}),r("removeNewReminder")),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](3),a.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),r("removeNewReminder");case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))()},updateReminder:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.state,i=t.commit,a=e.data,o=e.toast,s=r.list,c=[],s.forEach((function(t){t.id==a.id?c.push({id:a.id,description:a.description,createdAt:a.createdAt,patientId:a.patientId}):c.push(t)})),i("setReminderList",c),n.prev=6,n.next=9,fetch("".concat(p["REMINDER_API_URL"],"/").concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+g},body:JSON.stringify(a)});case 9:u=n.sent,u.ok||(o.toast("Failed to update reminder data",{title:"Error",variant:"danger",solid:!0}),i("setReminderList",s)),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](6),o.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),i("setReminderList",s);case 17:case"end":return n.stop()}}),n,null,[[6,13]])})))()},discontinueReminder:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.state,i=t.commit,a=e.data,o=e.toast,s=r.list,c=s.filter((function(t){return t.id!=a.id})),i("setReminderList",c),n.prev=5,a["discontinue"]=!0,n.next=9,fetch("".concat(p["REMINDER_API_URL"],"/").concat(a.id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+g},body:JSON.stringify(a)});case 9:u=n.sent,u.ok||(o.toast("Failed to discontinue reminder data",{title:"Error",variant:"danger",solid:!0}),i("setReminderList",s)),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](5),o.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),i("setReminderList",s);case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},multidiscontinueReminder:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.state,i=t.commit,a=e.selectedIds,o=e.toast,s=e.selectedDatas,c=r.list,u=c.filter((function(t){return!a.includes(t.id)})),i("setReminderList",u),s.forEach(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e["discontinue"]=!0,t.next=4,fetch("".concat(p["REMINDER_API_URL"],"/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+g},body:JSON.stringify(e)});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),o.toast("Server connection error",{title:"Error",variant:"danger",solid:!0}),i("setReminderList",c);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return n.stop()}}),n)})))()},getReminders:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.patientId,a=e.toast,null==g&&(g=localStorage.getItem("token")),n.prev=3,n.next=6,fetch("".concat(p["REMINDER_API_URL"],"?patientId=").concat(i),{headers:{Authorization:"Bearer "+g}});case 6:if(o=n.sent,!o.ok){n.next=14;break}return n.next=10,o.json();case 10:s=n.sent,r("setReminderList",s),n.next=15;break;case 14:"401"==o.status?(a.toast("Token is expired",{title:"Error",variant:"danger",solid:!0}),localStorage.removeItem("token"),window.location="/"):a.toast("Failed to get reminder data",{title:"Error",variant:"danger",solid:!0});case 15:n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](3),a.toast("Server connection error",{title:"Error",variant:"danger",solid:!0});case 20:case"end":return n.stop()}}),n,null,[[3,17]])})))()}},getters:{reminders:function(t){return t.list.filter((function(t){return 1!=t.discontinue}))},panelReminders:function(t){return t.list.filter((function(e){var n=new Date(e.createdAt);return 1!=e.discontinue&&n<=t.currentDate}))}}},E=(n("c740"),{state:{style:1},mutations:{setStyle:function(t,e){t.style=e}},actions:{loadSetting:function(t){return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=localStorage.getItem("token"),e.next=4,fetch(p["SETTING_API_URL"],{headers:{Authorization:"Bearer "+r}});case 4:if(i=e.sent,!i.ok){e.next=12;break}return e.next=8,i.json();case 8:a=e.sent,o=a.findIndex((function(t){return"style"==t.key})),s=a[o].value,n("setStyle",s);case 12:case"end":return e.stop()}}),e)})))()}},getters:{style:function(t){return 1==t.style?"info":"dark"}}}),D={state:{width:"29%",list:[],rows:[],focusRowIndex:-1,searchKeyword:""},mutations:{setRightPanelWidth:function(t,e){t.width=e},setRightPanelList:function(t,e){t.list=e},setRightPanelFocusRowIndex:function(t,e){t.focusRowIndex=e},setRightPanelRows:function(t,e){t.rows=e},setRightPanelSearchKeyword:function(t,e){t.searchKeyword=e}},getters:{rightPanelFocusRow:function(t){return t.rows[t.focusRowIndex]}},actions:{updateRightPanelRow:function(t){var e=t.rootState,n=t.commit,r=[],i=e.rightPanel.list;i.forEach((function(t){var n=e[t.key]["list"].filter((function(t){return 1!=t.discontinue}));r.push("".concat(t.key,"-0")),n.forEach((function(e,n){r.push("".concat(t.key,"-").concat(n+1))}))})),r.push("search-box"),n("setRightPanelRows",r)}}},y={state:{visibility:!1,tabList:[],recommendationTabType:"",recommendationData:null,reminderTabType:"",reminderData:null},mutations:{setTabDialogVisibility:function(t,e){t.visibility=e},setRecommendationTabType:function(t,e){t.recommendationTabType=e},setRecommendationData:function(t,e){t.recommendationData=e},addNewTab:function(t,e){t.tabList.push(e)},setTabList:function(t,e){t.tabList=e},setReminderTabType:function(t,e){t.reminderTabType=e},setReminderData:function(t,e){t.reminderData=e},showAddRecommendationModal:function(t){var e=n("6ee5");t.tabList=[{key:p["ADD_RECOMMENDATION"],value:e.default}],t.recommendationTabType=p["ADD_RECOMMENDATION"],t.visibility=!0},showMultiChangeRecommendationModal:function(t){var e=n("50fb");t.tabList=[{key:p["MULTIPLE_CHANGE_RECOMMENDATION"],value:e.default}],t.recommendationTabType=p["MULTIPLE_CHANGE_RECOMMENDATION"],t.visibility=!0},showEditRecommendationsModal:function(t,e){var r=n("6ee5");t.tabList=[{key:p["ADD_RECOMMENDATION"],value:r.default}],t.visibility=!0,t.recommendationTabType=p["EDIT_RECOMMENDATION"],t.recommendationData=e},showAddReminderModal:function(t){var e=n("459b");t.tabList=[{key:p["ADD_REMINDER"],value:e.default}],t.reminderTabType=p["ADD_REMINDER"],t.visibility=!0},showMultiChangeReminderModal:function(t){var e=n("d157");t.tabList=[{key:p["MULTIPLE_CHANGE_REMINDER"],value:e.default}],t.reminderTabType=p["MULTIPLE_CHANGE_REMINDER"],t.visibility=!0},showEditReminderModal:function(t,e){var r=n("459b");t.tabList=[{key:p["ADD_REMINDER"],value:r.default}],t.visibility=!0,t.reminderTabType=p["EDIT_REMINDER"],t.reminderData=e}}},_={state:{list:[],currentDate:"",zoomValue:1,originSize:null},mutations:{setLeftPanelList:function(t,e){t.list=e},setLeftPanelCurrentDate:function(t,e){t.currentDate=e},setLeftPanelZoomValue:function(t,e){t.zoomValue=e}},actions:{getLeftPanelComponents:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.toast,a=e.type,o=localStorage.getItem("token"),n.prev=3,n.next=6,fetch(p["COMPONENT_API_URL"]+"/getByType/"+a,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+o}});case 6:if(s=n.sent,!s.ok){n.next=14;break}return n.next=10,s.json();case 10:c=n.sent,u=[],c.forEach((function(t){var e=p["LEFT_SIDE_COMPONENTS"].filter((function(e){return e.key==t.name}));null!=e&&u.push(e[0].key)})),r("setLeftPanelList",u);case 14:n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](3),i.toast("Server connection error",{title:"Error",variant:"danger",solid:!0});case 19:case"end":return n.stop()}}),n,null,[[3,16]])})))()},zoomLeftPanel:function(){}},getters:{leftPanelList:function(t){var e=[];return t.list.forEach((function(t){var n=p["LEFT_SIDE_COMPONENTS"].filter((function(e){return e.key==t}));e.push(n[0].value)})),e}}},I={state:{socialHistoryVisiblity:!1},mutations:{setSocialHistoryVisibility:function(t,e){t.socialHistoryVisiblity=e}}};r["default"].use(m["a"]);var k=new m["a"].Store({state:{userRole:"",searchComponentList:[],focusComponent:"",connectionStatus:!0,userId:-1},mutations:{setUserRole:function(t,e){t.userRole=e},setFocusComponent:function(t,e){t.focusComponent=e},setSearchComponentList:function(t,e){t.searchComponentList=e},setConnectionStatus:function(t,e){t.connectionStatus=e},setUserId:function(t,e){t.userId=e}},actions:{getRoleDetails:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=localStorage.getItem("token"),n.next=4,fetch("".concat(p["ROLE_API_URL"],"/").concat(e),{headers:{Authorization:"Bearer "+i}});case 4:if(a=n.sent,!a.ok){n.next=13;break}return n.next=8,a.json();case 8:o=n.sent,r("setUserRole",o.name),s=o.availableComponents.split(","),s.push("clear"),r("setSearchComponentList",s);case 13:case"end":return n.stop()}}),n)})))()}},modules:{recommendation:v,reminder:R,setting:E,rightPanel:D,tabDialog:y,leftPanel:_,dialog:I},plugins:[Object(h["a"])()]}),T=n("8c4f");r["default"].use(T["a"]);var N=[{path:"/",name:"Home",component:function(){return n.e("home").then(n.bind(null,"bb51"))}},{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"a55b"))}},{path:"/test",name:"test",component:function(){return n.e("MultiChangeSocialHistory").then(n.bind(null,"78c1"))}},{path:"/reminder",name:"reminder",component:function(){return n.e("chunk-2624df20").then(n.bind(null,"0d39"))}},{path:"/service-statement",name:"service-statement",component:function(){return n.e("chunk-efe2f83a").then(n.bind(null,"67d0"))}},{path:"/recommendation",name:"recommendation",component:function(){return n.e("chunk-5a75f314").then(n.bind(null,"30ab"))}}],O=new T["a"]({mode:"history",base:"/",routes:N}),w=O,A=n("9b40"),M=n.n(A),C=n("3b09"),L=n("9483");Object(L["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var x=n("f617"),S=(n("dac4"),n("4d48")),P=n.n(S),U=(n("4bf4"),n("e9e9")),j=n("5c96"),$=n.n(j);n("0fae");r["default"].use(M.a);var B=n("f13c");r["default"].use(B),r["default"].use(C["a"]),r["default"].use(x["a"]),r["default"].use(P.a),r["default"].use(U),r["default"].use($.a),r["default"].config.productionTip=!1,new r["default"]({store:k,router:w,render:function(t){return t(l)}}).$mount("#app")},"6ee5":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.modalTitle)+" "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.closeTab}},[t._v("x")])]},proxy:!0}])},[n("label",[t._v("Description:")]),n("b-form-textarea",{attrs:{id:"textarea-state",state:t.validation,rows:"5",autofocus:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),n("b-form-invalid-feedback",{attrs:{state:t.validation}},[t._v("Description content is required.")]),n("b-button",{staticClass:"float-right mb-2 mt-2",attrs:{variant:"primary",size:"sm",disabled:!t.validation},on:{click:t.save}},[t._v(t._s(t.buttonText))])],1)},i=[],a=(n("a4d3"),n("e01a"),n("4de4"),n("b441")),o=n("cc98"),s=n.n(o),c={data:function(){return{description:""}},computed:{type:function(){return this.$store.state.tabDialog.recommendationTabType},modalTitle:function(){return this.type==a["ADD_RECOMMENDATION"]?"Add Recommendation":"Edit Recommendation"},buttonText:function(){return this.type==a["ADD_RECOMMENDATION"]?"Save":"Update"},validation:function(){return this.description.length>0},id:function(){return this.$route.query.patient_id},updateData:function(){return this.$store.state.tabDialog.recommendationData},tabList:function(){return this.$store.state.tabDialog.tabList},userId:function(){return this.$store.state.userId}},methods:{save:function(){if(this.type==a["ADD_RECOMMENDATION"]){var t=new Date,e={createdAt:t.toDateString(),recommendationID:s()(),patientId:this.id,description:this.description,createdByUserId:this.userId};this.$store.dispatch("addRecommendation",{data:e,toast:this.$bvToast}),this.$store.dispatch("updateRightPanelRow"),this.description=""}else this.updateData["description"]=this.description,this.updateData["discontinuedByUserId"]=this.userId,this.updateData["createdByUserId"]=this.userId,this.$store.dispatch("updateRecommendation",{data:this.updateData,toast:this.$bvToast})},closeTab:function(){var t=this.tabList.filter((function(t){return t.key!=a["ADD_RECOMMENDATION"]}));this.$store.commit("setTabList",t)}},mounted:function(){this.type==a["EDIT_RECOMMENDATION"]&&(this.description=this.updateData.description)}},u=c,d=n("2877"),l=Object(d["a"])(u,r,i,!1,null,"2f08f9a8",null);e["default"]=l.exports},b441:function(t,e,n){n("d3b7"),t.exports={RECOMMENDATION_API_URL:"http://localhost:8000/recommendations",REMINDER_API_URL:"http://localhost:8000/reminders",SETTING_API_URL:"http://localhost:8000/settings",LOGIN_API_URL:"http://localhost:8000/auth/login",ROLE_API_URL:"http://localhost:8000/user-roles",SOCKET_API_URL:"http://localhost:8000",USER_API_URL:"http://localhost:8000/users",COMPONENT_API_URL:"http://localhost:8000/components",LEFT_SIDE_COMPONENTS:[{key:"recommendation",value:function(){return Promise.all([n.e("chunk-967f49e6"),n.e("chunk-2d20edb2")]).then(n.bind(null,"b0c1"))}},{key:"reminder",value:function(){return Promise.all([n.e("chunk-967f49e6"),n.e("chunk-2d230e36")]).then(n.bind(null,"edcd"))}},{key:"other",value:function(){return n.e("chunk-2d221a25").then(n.bind(null,"cad5"))}}],ADD_DIALOG:1,STYLE_1:1,STYLE_2:2,ADD_RECOMMENDATION:1,EDIT_RECOMMENDATION:2,MULTIPLE_CHANGE_RECOMMENDATION:3,ADD_REMINDER:4,EDIT_REMINDER:5,MULTIPLE_CHANGE_REMINDER:6}},d157:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Multi change reminder "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.closeTab}},[t._v("x")])]},proxy:!0}])},[n("b-row",{attrs:{cols:"3"}},t._l(t.reminders,(function(e,r){return n("b-col",{key:"item-"+r},[n("label",[t._v("Description:")]),n("b-form-textarea",{attrs:{id:"textarea-state",rows:"5",autofocus:""},model:{value:e.description,callback:function(n){t.$set(e,"description",n)},expression:"item.description"}}),n("b-form-invalid-feedback",[t._v("Description content is required.")]),n("b-button",{staticClass:"float-right mb-2 mt-2",attrs:{variant:"primary",size:"sm"},on:{click:function(n){return t.update(e)}}},[t._v("Save")])],1)})),1)],1)},i=[],a=(n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("159b"),n("b441")),o={computed:{items:function(){var t=this;return this.$store.state.reminder.list.filter((function(e){return e.patientId==t.id&&1!=e.discontinue}))},id:function(){return this.$route.query.patient_id},tabList:function(){return this.$store.state.tabDialog.tabList}},data:function(){return{reminders:[]}},mounted:function(){var t=this;this.items.forEach((function(e){t.reminders.push({id:e["id"],description:e["description"],createdAt:e["createdAt"],patientId:e["patientId"]})}))},methods:{update:function(t){this.$store.dispatch("updateReminder",{data:t,toast:this.$bvToast})},closeTab:function(){var t=this.tabList.filter((function(t){return t.key!=a["MULTIPLE_CHANGE_REMINDER"]}));this.$store.commit("setTabList",t)}}},s=o,c=n("2877"),u=Object(c["a"])(s,r,i,!1,null,"08614537",null);e["default"]=u.exports}});
//# sourceMappingURL=app.ae2cc246.js.map